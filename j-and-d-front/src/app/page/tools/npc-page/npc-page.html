<div class="npc-container">

  <h1>Liste des Monstres</h1>

  <button *ngIf="!showForm" (click)="showForm = true" class="btn btn-light mb-3">
    Créer un Monstre
  </button>

  <form *ngIf="showForm" (ngSubmit)="creer()" [formGroup]="npcForm" class="card p-3 mb-4">

    <div class="row">

      <div class="col-md-4 mb-3">
        <label>Nom du monstre</label>
        <input class="form-control" formControlName="name" />
      </div>

      <div class="col-md-2 mb-3">
        <label>Niveau</label>
        <input type="number" class="form-control" formControlName="level" />
      </div>

      <div class="col-md-2 mb-3">
        <label>HP</label>
        <input type="number" class="form-control" formControlName="hp" />
      </div>

      <div class="col-md-2 mb-3">
        <label>MP</label>
        <input type="number" class="form-control" formControlName="mp" />
      </div>

      <div class="col-md-2 mb-3">
        <label>Vitesse</label>
        <input type="number" class="form-control" formControlName="speed" />
      </div>

      <div class="col-md-3 mb-3">
        <label>Classe d'armure</label>
        <input class="form-control" type="number" formControlName="armorClass" />
      </div>

      <div class="col-md-3 mb-3">
        <label>Initiative</label>
        <input class="form-control" type="number" formControlName="initiative" />
      </div>

      <div class="col-md-3 form-check mb-3 mt-4">
        <input type="checkbox" class="form-check-input" formControlName="alive" />
        <label class="form-check-label">En vie</label>
      </div>

      <div class="col-md-6 mb-3">
        <label>Armure</label>
        <input class="form-control" formControlName="armor" />
      </div>

      <div class="col-md-6 mb-3">
        <label>Arme</label>
        <input class="form-control" formControlName="weapon" />
      </div>

      <div class="col-md-6 mb-3">
        <label>Équipement porté (séparé par virgules)</label>
        <input class="form-control" formControlName="itemWorn" />
      </div>

      <div class="col-md-6 mb-3">
        <label>Inventaire (séparé par virgules)</label>
        <input class="form-control" formControlName="inventory" />
      </div>

      <div class="col-md-12 mb-3">
        <label>Stats (STR,DEX,CON,INT,WIS,CHA)</label>
        <input class="form-control" placeholder="10,12,14,8,11,9" formControlName="statsStr" />
      </div>

      <div class="col-md-6 mb-3">
        <label>Rôle du monstre</label>
        <input class="form-control" formControlName="roleName" />
      </div>

      <div class="col-md-6 mb-3">
        <label>États (séparés par virgules)</label>
        <input class="form-control" formControlName="state" />
      </div>

      <div class="col-md-3 mb-3">
        <label>XP</label>
        <input type="number" class="form-control" formControlName="xp" />
      </div>

    </div>

    <div class="btn-group mt-3">
      <button class="btn btn-success" type="submit">Créer</button>
      <button class="btn btn-danger" type="button" (click)="annuler()">Annuler</button>
    </div>

  </form>

  <div class="npc-grid">

    <div class="card npc-card" *ngFor="let npc of npcs$ | async">
      <div class="card-body">

        <h5>{{ npc.name }} (Niv {{ npc.level }})</h5>

        <p><strong>HP :</strong> {{ npc.hp }}</p>
        <p><strong>MP :</strong> {{ npc.mp }}</p>
        <p><strong>Vitesse :</strong> {{ npc.speed }}</p>
        <p><strong>Armure :</strong> {{ npc.armor || "Aucune" }}</p>
        <p><strong>Arme :</strong> {{ npc.weapon || "Aucune" }}</p>
        <p><strong>Classe d’armure :</strong> {{ npc.armorClass }}</p>
        <p><strong>Initiative :</strong> {{ npc.initiative }}</p>
        <p><strong>Rôle :</strong> {{ npc.role?.name }}</p>
        <p><strong>XP :</strong> {{ npc.xP }}</p>

        <div class="btn-group">
          <button class="btn btn-warning btn-sm" (click)="editer(npc)">Modifier</button>
          <button class="btn btn-danger btn-sm" (click)="delete(npc.id)">Supprimer</button>
        </div>

      </div>
    </div>

  </div>

</div>
